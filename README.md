## github项目地址

https://github.com/zzidun-pavo/Calculation.git

## 耗费的时间

| PSP                                     | Personal Software Process Stages        | 预估耗时（分钟） | 实际耗时（分钟） |
| --------------------------------------- | --------------------------------------- | ---------------- | ---------------- |
| Planning                                | 计划                                    |                  |                  |
| · Estimate                              | · 估计这个任务需要多少时间              | 15               | 10               |
| Development                             | 开发                                    |                  |                  |
| · Analysis                              | · 需求分析 (包括学习新技术)             | 30               | 40               |
| · Design Spec                           | · 生成设计文档                          | 50               | 40               |
| · Design Review                         | · 设计复审 (和同事审核设计文档)         | 30               | 10               |
| · Coding Standard                       | · 代码规范 (为目前的开发制定合适的规范) | 30               | 20               |
| · Design                                | · 具体设计                              | 60               | 30               |
| · Coding                                | · 具体编码                              | 400              | 120              |
| · Code Review                           | · 代码复审                              | 100              |                  |
| · Test                                  | · 测试（自我测试，修改代码，提交修改）  | 60               |                  |
| Reporting                               | 报告                                    |                  |                  |
| · Test Report                           | · 测试报告                              | 40               |                  |
| · Size Measurement                      | · 计算工作量                            | 20               |                  |
| · Postmortem & Process Improvement Plan | · 事后总结, 并提出过程改进计划          | 30               |                  |
| 合计                                    |                                         |                  |                  |

## 效能分析



## 设计实现过程

##### 要求

* 使用-n参数控制生成题目的个数
* 使用-r参数控制生成题目中的数值
* 生成的题目计算过程中不能产生负数
* 如果存在形如$e_1\div e_2$的子表达式,那么其结果是真分数.
* 每道题目中运算符不超过3个
* 程序一次运行生成的题目不能重复,生成的题目存入执行程序的当前目录下的`Exercises.txt`文件

>1.四则运算题目1
>
>2.四则运算题目2

* 生成题目的同时,计算出所有题目的答案,并存入执行程序的当前目录下的`answer.txt`文件.

> 答案1
>
> 答案2

* 程序能支持一万道题目的生成
* 程序支持对给定题目文件和答案文件,判断答案中的对错并进行数量统计,结果输出到文件`Grade.txt`

``` shell
Myapp.exe -e <exercisefile>.txt -a <answer>.txt
```

> Correct: 5 (1,3,5,7,9)
>
> Wrong: 5 (2,4,6,8,10)



##### 保证数字的范围

先生成一个结果作为答案,然后再生成题目,每次产生下一个操作数的时候根据答案来控制.

##### 分数的实现

IEEE754的小数存在精度问题,算出小数再倒推分数会很麻烦.

全程不用小数,先实现一个分数类,分数类中自动用gcd约分.

##### 不重复

当n和r的大小不恰当时,r的范围内出不了n道题目.

要先计算出对于每一个r,最多能产生多少道题目.

对于不恰当的输入参数,返回某些结果.

##### 如何实现

先随机产生除法和减法的运算符,使得运算数不同.

因为除法和减法没有交换性,所以只需要保证每个位置的数字不同,即可保证没有重复的式子.

然后在产生的几个操作数中,随机拆分成若干个数的相加或者相乘.

##### 效率问题

当n远大于r的时候,这样子的生成是非常慢的,因为产生出相同式子的概率非常大.

所以应该确认一个范围,当n比r大到一定程度后,不再随机产生式子,而是按顺序枚举式子.



## 代码说明

#### main:

主函数,判断参数并且调用函数

#### fraction:

实现分数的存储的表示

#### getopt

由于windows下缺少`getopt.h`,所以找了一个不限平台的`getopt`库





## 测试运行



## 项目小结





